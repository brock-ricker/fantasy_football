# Fantasy Football

Summary
---
Collects data from numerous onlines sources; APIs and Web scraping, to analyse Fantasy Football analytics. Using this data, machine learning models are implemented to make predictions about individual player performance and draft pick value.

Data Wrangling
---

This project uses data from 2 main sources:
* API from [myfantasyleague.com](https://api.myfantasyleague.com/2022/api_info) for fantasy football data
* Web scraping from https://www.sportsoddshistory.com/ for historical scores, spreads and over/unders

This data is collected, cleaned, and saved to SQL server for analysis. To setup a similar database, you can use: Fantasy_Football_Server_Initialization_v*. This script will setup an SQLite server and populate it from the above sources. Please note: The API requests are spaced out in order to prevent being locked out by myfantasyleague, because of this the script will take ~30 minutes to run.

The list of tables generated by the script are as follows:

| Table Name | Description | Source |
| ------------- | ------------- | ------------- |
| weekly_players | Weekly results, broken down by players | https://api.myfantasyleague.com/2022/api_info |
| weekly_teams | Weekly results, broken down by teams | https://api.myfantasyleague.com/2022/api_info |
| weekly_matchups | Weekly results, broken down by matchups | https://api.myfantasyleague.com/2022/api_info |
| simple_players | Simple player information, by year | https://api.myfantasyleague.com/2022/api_info |
| adp | Average draft postion information, for each player, by year | https://api.myfantasyleague.com/2022/api_info |
| points_allowed | Average points allowed by team per position, per week | https://api.myfantasyleague.com/2022/api_info |
| projected_scores | My fantasy projected score for given player and given week | https://api.myfantasyleague.com/2022/api_info |
| league_teams | Information for teams in fantasy league | https://api.myfantasyleague.com/2022/api_info |
| spreads | Vegas spreads and results by year/week. 2 entries per matchup | https://www.sportsoddshistory.com |

* For a more in-depth explanation of tables and data, view "My_Fantasy_Data_Dictionary.xlsx" in the repository


Exploratory Analysis
---
My fantasy football league started in 2017. The league consists of 12 teams, with active rosters of 29 players. Each week, teams choose 9 starters that are any combination of the following player types: 1-2 QBs, 2-5 RBs, 2-5 WRs, and 1-4 TEs. The scoring is 0.5 pt. PPR, with the exception of TEs who get a full point.

From 2017-2021 there have been 6966 player starts; 2519 WRs, 2028 RBs, 1448 QBs, and 971 TE's. These starts represent 466 unique players.
![image](https://user-images.githubusercontent.com/99829862/178121244-14dc91cf-6ba0-4263-92c3-1452561475f5.png)

It is possible to further break down player starts, by looking at the points scored, by position for every team. This will tell us what is a "good" score for a certain position vs. a "bad" one. The folowing is a histogram of scores for every starter by position:
![image](https://user-images.githubusercontent.com/99829862/178121824-f0cfa86f-026c-4835-a53b-61279f1f64ad.png)

The vertical green line is the 50th percentile (median) of starts. Any score over this threshold can be considered a good score, if a player reaches this score, there is a good chance they will be in the top 1/2 of starter scores for that week. The red line is the 90th percentile, this is an elite score, if a player reaches this score, there is a good chance they will be in the top 10% of starter scores for that week. In QBs, for example, this would be a top 2 performance.




Player Score Model
---

Modeling
---
